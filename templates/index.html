<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>画像変換アプリ</title>
    <style>
        img.preview {
            max-width: 300px;
            max-height: 300px;
            margin-top: 10px;
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>
    <h1>画像変換アプリ</h1>
    <form action="/convert" method="post" enctype="multipart/form-data">
        <label>画像を選択：<input type="file" name="image" accept="image/*" onchange="previewImage(event)" required></label><br>
        <img id="preview" class="preview" src="#" alt="プレビュー画像" style="display: none;"><br><br>

        <label><input type="checkbox" name="trim"> 余白トリミング</label><br>
        <label>DPI: <input type="number" name="dpi" value="300" required></label><br>
        <label>幅（mm）: <input type="number" name="width" step="0.1"></label><br>
        <label>高さ（mm）: <input type="number" name="height" step="0.1"></label><br>

        <label>処理モード:</label><br>
        <label><input type="radio" name="mode" value="binary" checked> バイナリ</label><br>
        <label><input type="radio" name="mode" value="halftone"> ハーフトーン</label><br><br>

        <button type="submit">変換する</button>
    </form>

    <script>
        function previewImage(event) {
            const input = event.target;
            const preview = document.getElementById('preview');
            const reader = new FileReader();
            reader.onload = function(){
                preview.src = reader.result;
                preview.style.display = "block";
            };
            reader.readAsDataURL(input.files[0]);
        }
    </script>
</body>
</html>
